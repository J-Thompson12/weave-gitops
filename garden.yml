kind: Module
description: Node hot reload image
name: wego-app-image
type: container
dockerfile: dev.dockerfile
exclude : [manifests/garden/*,node_modules]
hotReload:
  sync:
    - target: /go/src/github.com/weaveworks/weave-gitops/
---
kind: Module
description: K8s Module
name: wego-app-service # This need to match the name of the service
include: [manifests/garden/*]
type: kubernetes
devMode:
  command: [ ./bin/air ]
  args: [ -d ]
  sync:
    - target: /go/src/github.com/weaveworks/weave-gitops
namespace: wego-system
serviceResource:
  kind: Deployment
  containerModule: wego-app-image
  name: wego-app-development # This need to match the name of the deployment
  containerName: wego-app
  hotReloadArgs: [./bin/air]
files: [
    manifests/garden/deployment.yaml,
    manifests/garden/ingress.yaml,
    manifests/garden/service.yaml,
]